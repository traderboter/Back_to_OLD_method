# کارهای باقی‌مانده (TODO)

## اولویت بالا

### 1. بهینه‌سازی منطق سیگنال
- [ ] آستانه سیگنال فعلی (60) خیلی بالاست و معامله‌ای تولید نمی‌کند
- [ ] منطق تولید سیگنال در `fast_backtest.py` باید با سیستم اصلی هماهنگ شود
- [ ] بررسی و پیاده‌سازی استراتژی‌های معاملاتی واقعی

### 2. تست صحت نتایج
- [ ] مقایسه نتایج بکتست سریع با بکتست اصلی
- [ ] اطمینان از یکسان بودن محاسبات اندیکاتور
- [ ] اطمینان از یکسان بودن شناسایی الگوها

### 3. مدیریت حافظه
- [ ] پیاده‌سازی لود chunk به chunk برای داده‌های بزرگ
- [ ] بهینه‌سازی نوع داده‌ها (float32 به جای float64)

---

## اولویت متوسط

### 4. اضافه کردن اندیکاتورهای بیشتر
- [ ] Ichimoku Cloud
- [ ] Fibonacci Retracement
- [ ] Volume Profile
- [ ] VWAP
- [ ] Pivot Points

### 5. اضافه کردن الگوهای بیشتر
- [ ] Double Top / Double Bottom
- [ ] Head and Shoulders
- [ ] Triangle patterns
- [ ] Flag patterns
- [ ] Cup and Handle

### 6. پشتیبانی از نمادهای بیشتر
- [ ] ETH-USDT
- [ ] BNB-USDT
- [ ] و سایر نمادها

### 7. گزارش‌دهی
- [ ] تولید گزارش PDF
- [ ] نمودار equity curve
- [ ] آمار معاملات (win rate, profit factor, ...)

---

## اولویت پایین

### 8. بهبود عملکرد
- [ ] استفاده از multiprocessing برای محاسبه موازی
- [ ] کش کردن در حافظه با LRU cache
- [ ] استفاده از numba برای محاسبات سنگین

### 9. ابزارهای کمکی
- [ ] اسکریپت آپدیت داده‌ها (فقط کندل‌های جدید)
- [ ] اسکریپت پاکسازی کش
- [ ] اسکریپت بررسی سلامت داده‌ها

### 10. تست‌ها
- [ ] Unit tests برای اندیکاتورها
- [ ] Unit tests برای الگوها
- [ ] Integration tests

---

## انجام شده

- [x] ساختار پوشه‌بندی
- [x] محاسبه اندیکاتورهای پایه (EMA, SMA, RSI, MACD, ATR, BB, Stoch, OBV, ADX)
- [x] شناسایی 11 الگوی کندلی
- [x] موتور بکتست سریع پایه
- [x] استفاده از config محلی
- [x] ذخیره در فرمت Parquet
- [x] پیش‌محاسبه برای 4 تایم‌فریم (5m, 15m, 1h, 4h)
- [x] مستندات

---

## یادداشت‌های فنی

### چرا Parquet؟
- فشرده‌سازی خوب (حجم کمتر)
- لود سریع (columnar format)
- سازگار با pandas

### چرا بدون talib؟
- نصب talib روی بعضی سیستم‌ها مشکل است
- پیاده‌سازی با pandas کافی است
- استقلال از وابستگی‌های خارجی

### محدودیت‌های فعلی
- فقط یک نماد (BTC-USDT)
- منطق سیگنال ساده
- بدون مدیریت ریسک پیشرفته
