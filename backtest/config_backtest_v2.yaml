# ================= Backtest Minimal Config =================
# Ø§ÛŒÙ† ÙØ§ÛŒÙ„ ÙÙ‚Ø· Ø´Ø§Ù…Ù„ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø®Ø§Øµ Backtest Ø§Ø³Øª
# Ø¨Ù‚ÛŒÙ‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§Ø² config.yaml Ø§ØµÙ„ÛŒ Ù„ÙˆØ¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯
#
# ğŸ†• Ù†Ø­ÙˆÙ‡ Ú©Ø§Ø±:
# 1. config.yaml Ø§ØµÙ„ÛŒ Ù„ÙˆØ¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯ (patterns, analyzers, etc)
# 2. Ø§ÛŒÙ† ÙØ§ÛŒÙ„ override/merge Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ø±ÙˆÛŒ config Ø§ØµÙ„ÛŒ
# 3. ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§ÛŒÙ† ÙØ§ÛŒÙ„ Ø§ÙˆÙ„ÙˆÛŒØª Ø¯Ø§Ø±Ù†Ø¯
# ========================================================

# ================= Override: Exchange (Backtest Mode) =================
exchange:
  api_key: 'BACKTEST_MODE'
  api_secret: 'BACKTEST_MODE'
  websocket:
    enabled: False

# ================= Override: Data Fetching (CSV Mode) =================
data_fetching:
  primary_api: 'csv'
  auto_symbols: False
  timeframes: ['5m', '15m', '1h', '4h']  # 4 ØªØ§ÛŒÙ…â€ŒÙØ±ÛŒÙ…
  delta_updates:
    enabled: False
  cache:
    use_redis: False
    use_memory_cache: True

# ================= Override: Signal Generation =================
signal_generation:
  minimum_signal_score: 5  # Ú©Ø§Ù‡Ø´ Ø¨Ù‡ 5 (Multi-TF aggregate scores are 7-16)
  use_adaptive_learning: False  # Ø¯Ø± backtest ØºÛŒØ±ÙØ¹Ø§Ù„
  adaptive_learning:
    enabled: False
    register_results: False

# ================= Override: Signal Validation (deleted - merged below) =================
# Moved to line 114 to avoid duplicate key

# ================= Override: Trading Mode =================
trading:
  mode: 'backtest'
  multi_tp:
    enabled: False

# ================= Override: Risk Management (Backtest Settings) =================
risk_management:
  account_balance: 10000.0
  use_correlation_check: False
  btc_correlation:
    consider_btc_trend: False

# ================= Backtest Specific Settings =================
backtest:
  mode: 'historical'
  data_source: 'csv'
  data_path: './historical/'

  # Ø¨Ø§Ø²Ù‡ Ø²Ù…Ø§Ù†ÛŒ (full data range: 2024-11-23 to 2025-10-18)
  start_date: '2024-11-23 03:00:00'
  end_date: '2025-10-18 07:00:00'
  
  # Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
  initial_balance: 10000.0
  
  # Ù†Ù…Ø§Ø¯Ù‡Ø§
  symbols:
    - 'BTC-USDT'
  
  # ÙØ±Ù…Øª CSV
  csv_format:
    folder_structure: '{symbol}/'
    timeframe_files:
      '5m': '5min.csv'
      '15m': '15min.csv'
      '1h': '1hour.csv'
      '4h': '4hour.csv'
    separator: ','
    encoding: 'utf-8'
    columns:
      timestamp: 'timestamp'
      open: 'open'
      high: 'high'
      low: 'low'
      close: 'close'
      volume: 'volume'
    date_format: '%Y-%m-%d %H:%M:%S'
    validate_data: True
    fill_missing_data: True
  
  # ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ (15m for faster testing)
  step_timeframe: '15m'
  process_interval: 60  # Process signal every 60 steps (15 hours)
  
  # Ú©Ù…ÛŒØ³ÛŒÙˆÙ† Ùˆ Ø§Ø³Ù„ÛŒÙ¾ÛŒØ¬
  commission_rate: 0.0006
  slippage: 0.0005
  
  # Ú¯Ø²Ø§Ø±Ø´â€ŒØ¯Ù‡ÛŒ
  generate_report: True
  save_trades_to_csv: True
  create_equity_curve: True
  results_dir: 'backtest_results'
  use_progress_bar: True

# ================= Override: Orchestrator =================
orchestrator:
  send_to_trade_manager: False  # Ø¯Ø± backtest Ù†ÛŒØ§Ø² Ù†ÛŒØ³Øª

# ================= Override: Signal Processing =================
signal_processing:
  symbols: ['BTC-USDT']
  primary_timeframe: '1h'
  notification:
    enabled: False

  # Validation thresholds (optimized based on 30k perfect trades analysis)
  validation:
    min_signal_score: 10  # Ú©Ø§Ù‡Ø´ Ø§Ø² 50 â†’ 30 â†’ 10 (observed scores: 14-48)
    min_rr_ratio: 0.6  # Ú©Ø§Ù‡Ø´ Ø§Ø² 1.8 â†’ 1.0 â†’ 0.6 (TP from S/R often very close)
    max_risk_percent: 5.0  # Ø§ÙØ²Ø§ÛŒØ´ Ø§Ø² 2.0 Ø¨Ù‡ 5.0 Ø¨Ø±Ø§ÛŒ backtest
    circuit_breaker:
      enabled: false  # ØºÛŒØ±ÙØ¹Ø§Ù„ Ø¨Ø±Ø§ÛŒ backtest

  multi_timeframe:
    direction_margin: 1.0  # Ú©Ø§Ù‡Ø´ Ø§Ø² 1.1 - Ù‡ÛŒÚ† margin Ù†Ù…ÛŒØ®ÙˆØ§Ù‡ÛŒÙ… (ÙÙ‚Ø· bullish > bearish Ú©Ø§ÙÛŒØ³Øª)

# ================= Override: Timeframe Score Cache =================
timeframe_score_cache:
  enabled: False  # Ø¯Ø± backtest Ø¨Ø±Ø§ÛŒ Ø¯Ù‚Øª False

# ================= Override: Logging =================
logging:
  level: 'INFO'
  file: 'logs/backtest_btc.log'

# ================= Override: Notifications (Disabled) =================
notification:
  enabled: False

# ================= Override: AI Systems (Disabled) =================
trading_brain_ai:
  enabled: False

ml_signal_integration:
  enabled: False

# ================= Override: Advanced Systems (Disabled for Backtest) =================
systems:
  adaptive_learning:
    enabled: False
    register_results: False

  correlation_manager:
    enabled: False

  circuit_breaker:
    enabled: False

  regime_detector:
    enabled: True  # Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ ÙØ¹Ø§Ù„ Ø¨Ø§Ø´Ø¯ - ÙÙ‚Ø· ØªØ´Ø®ÛŒØµ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯
